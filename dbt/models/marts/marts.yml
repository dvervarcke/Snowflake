version: 2

models:
  - name: dim_menu_types
    description: Menu type dimension from the raw menu source.
    columns:
      - name: menu_type_id
        tests:
          - not_null
          - unique
      - name: menu_type
        tests:
          - not_null

  - name: dim_truck_brands
    description: Truck brand dimension from the raw menu source.
    columns:
      - name: truck_brand_name
        tests:
          - not_null
          - unique

  - name: fct_menu_items
    description: Item-grain fact mart with menu type and brand references.
    columns:
      - name: menu_item_id
        tests:
          - not_null
          - unique
      - name: menu_type_id
        tests:
          - relationships:
              to: ref('dim_menu_types')
              field: menu_type_id
      - name: truck_brand_name
        tests:
          - relationships:
              to: ref('dim_truck_brands')
              field: truck_brand_name
      - name: gross_margin_usd
        tests:
          - dbt_utils.accepted_range:
              min_value: 0
              inclusive: true
      - name: gross_margin_pct
        tests:
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 1
              inclusive: true
